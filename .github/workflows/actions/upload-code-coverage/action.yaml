name: 'Upload Code Coverage'
description: 'Send coverage files to codecov'
inputs:
  CODECOV_TOKEN:
    description: 'CODECOV_TOKEN'
    required: true

runs:
  using: "composite"
  steps:
    - shell: bash
      run: pwd

    - shell: bash
      run: ls

    - name: Upload aws to Codecov
      uses: codecov/codecov-action@v3
      env:
        CODECOV_TOKEN: ${{ inputs.CODECOV_TOKEN }}
      with:
        files:
          - ./modules/aws/artifacts/coverage/coverage-final.json
          - ./modules/aws-node-only/artifacts/coverage/coverage-final.json
